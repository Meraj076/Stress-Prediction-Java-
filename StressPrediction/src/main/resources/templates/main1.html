<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>StressOMeter - Predict & Manage Stress</title>

    <!-- Fonts & Lottie -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>

    <style>
        /* ========== Theme variables ========== */
        :root {
            --color-bg-dark: #0E0429;
            --color-gradient-start: #2c0b48;
            --color-gradient-end: #00001a;
            --color-text-primary: #f0f0ff;
            --color-accent: #8b5cf6;
            --color-accent-hover: #a78bfa;
            --color-cta-bg: #4c1d95;
            --color-card-bg: rgba(44, 11, 72, 0.42);
            --color-glass-border: rgba(255,255,255,0.08);
            --color-section-bg: rgba(0,0,26,0.58);
            --font-family-primary: 'Poppins', sans-serif;
            --space-violet: 139,92,246;
            --space-blue: 80,120,255;
            --space-deep: 14,4,41;
        }

        /* ========== Reset & layout ========== */
        *{box-sizing:border-box;margin:0;padding:0}
        html,body{height:100%;font-family:var(--font-family-primary);background:var(--color-bg-dark);color:var(--color-text-primary);overflow-x:hidden}
        body { display:flex;flex-direction:column;min-height:100vh; }

        /* ========== Canvas background (full-page) ========== */
        #spaceCanvas {
            position: fixed;
            inset: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            display:block;
            pointer-events: none;
            will-change: transform;
            background: radial-gradient(1200px 600px at 50% 12%, rgba(44,11,72,0.25), transparent 20%),
                        radial-gradient(800px 400px at 20% 80%, rgba(10,6,30,0.25), transparent 18%);
        }

        /* Soft nebula overlay using CSS + subtle drift */
        .nebula-overlay {
            position: fixed;
            inset: 0;
            z-index: 1;
            pointer-events: none;
            mix-blend-mode: screen;
            opacity: 0.95;
            background:
                radial-gradient(40% 30% at 22% 18%, rgba(139,92,246,0.18), transparent 15%),
                radial-gradient(50% 40% at 80% 72%, rgba(80,120,255,0.14), transparent 22%),
                radial-gradient(65% 45% at 50% 45%, rgba(20,10,40,0.12), transparent 28%);
            filter: blur(36px) saturate(120%);
            animation: nebula-drift 22s ease-in-out infinite alternate;
        }
        @keyframes nebula-drift {
            from{transform: translate3d(0,0,0) scale(1)}
            to{transform: translate3d(-40px,-18px,0) scale(1.04)}
        }

        /* Twinkling overlay (subtle) */
        .twinkle-overlay {
            position: fixed; inset:0; z-index:2; pointer-events:none;
            background-image:
                radial-gradient(circle at 10% 20%, rgba(255,255,255,0.75) 0.6px, transparent 1px),
                radial-gradient(circle at 80% 10%, rgba(255,255,255,0.9) 0.6px, transparent 1px),
                radial-gradient(circle at 30% 70%, rgba(255,255,255,0.65) 0.5px, transparent 1px);
            opacity:0.65;
            mix-blend-mode: overlay;
            animation: twinkle 4.2s linear infinite;
            filter: drop-shadow(0 0 8px rgba(120,100,255,0.08));
        }
        @keyframes twinkle {
            0%{opacity:0.45; transform:scale(1)}
            50%{opacity:1; transform:scale(1.02)}
            100%{opacity:0.6; transform:scale(0.98)}
        }

        /* ========== Site content sits above canvas ========== */
        header, main, footer { position: relative; z-index: 1000; }

        .container { width:90%; max-width:1200px; margin:0 auto; padding:0 15px; }

        /* ========== IMPROVED RESPONSIVE HEADER ========== */
        header {
            position: sticky; 
            top:0; 
            width:100%; 
            z-index:1010; 
            padding:15px 0;
            background: rgba(14,4,41,0.85);
            backdrop-filter: blur(10px) saturate(120%);
            border-bottom: 1px solid rgba(255,255,255,0.08);
            transition: transform 0.3s ease;
            will-change: transform;
        }
        
        header .container { 
            display:flex; 
            align-items:center; 
            justify-content:space-between; 
            gap:12px; 
        }
        
    .logo { 
        font-size:1.8rem; 
        font-weight:700; 
        color:var(--color-accent-hover); 
        display:flex; 
        align-items:center; 
        gap:10px; 
        text-transform:uppercase; 
        text-decoration:none; 
        z-index: 1015;
    }

    .logo-img {
        width: 120px;  
        height: auto;
        display: inline-block;
        vertical-align: middle;
        animation: float 4s infinite ease-in-out;
    }

        /* Desktop Navigation - Centered */
        nav { 
            display: flex; 
            align-items: center;
            gap: 20px;
            margin: 0 auto; /* Center the nav */
        }
        
        /* Utility to show/hide items based on screen */
        @media (min-width: 769px) {
            .mobile-only-btn { display: none !important; }
        }
        
        nav a { 
            color:var(--color-text-primary); 
            text-decoration:none; 
            padding: 8px 16px;
            font-weight:400; 
            transition: color .2s, background .2s;
            border-radius: 6px;
        }
        
        nav a:hover { 
            color:var(--color-accent);
            background: rgba(139,92,246,0.1);
        }

        .nav-button { 
            background-color:var(--color-cta-bg); 
            border:1px solid var(--color-accent); 
            padding:10px 20px; 
            border-radius:6px; 
            font-weight:600; 
            cursor:pointer;
            white-space: nowrap;
            color: #ffffff !important; /* Force white text */
            display: inline-block;
            text-align: center;
        }
        
        .nav-button:hover { 
            background-color:var(--color-accent); 
            border-color:var(--color-accent-hover); 
            transform:translateY(-2px) 
        }

        /* Mobile Menu Toggle (Hamburger) */
        .menu-toggle {
            display: none;
            flex-direction: column;
            gap: 4px;
            background: none;
            border: none;
            cursor: pointer;
            padding: 8px;
            z-index: 1015;
        }
        
        .menu-toggle span {
            width: 28px;
            height: 3px;
            background: var(--color-text-primary);
            border-radius: 2px;
            transition: all 0.3s ease;
        }
        
        .menu-toggle.active span:nth-child(1) {
            transform: rotate(45deg) translate(6px, 6px);
        }
        
        .menu-toggle.active span:nth-child(2) {
            opacity: 0;
        }
        
        .menu-toggle.active span:nth-child(3) {
            transform: rotate(-45deg) translate(6px, -6px);
        }

        /* ========== Hero ========== */
        .hero { 
            text-align:center; 
            padding:170px 20px 90px 20px; 
            position:relative; 
            overflow:visible; 
        }
        
        .hero::before {
            content:''; 
            position:absolute; 
            left:50%; 
            top:6%; 
            transform:translateX(-50%); 
            width:min(700px, 90vw); 
            height:700px; 
            z-index:0;
            background: radial-gradient(circle, rgba(139,92,246,0.08) 0%, transparent 62%); 
            pointer-events:none;
            filter: blur(36px) saturate(120%);
            animation: pulse-subtle 6s infinite alternate;
        }
        
        @keyframes pulse-subtle { 
            from{opacity:0.6; transform:translateX(-50%) scale(0.96)} 
            to{opacity:0.82; transform:translateX(-50%) scale(1.06)} 
        }

        .hero h1 { 
            font-size:clamp(2rem, 5vw, 3.4rem); 
            margin-bottom:14px; 
            line-height:1.2;
            background: linear-gradient(90deg,#d3c4ff,var(--color-accent-hover),#f0f0ff);
            -webkit-background-clip:text; 
            -webkit-text-fill-color:transparent;
        }
        
        .hero p { 
            font-size:clamp(0.95rem, 2vw, 1.12rem); 
            color:rgba(255,255,255,0.85); 
            margin-bottom:24px;
            padding: 0 10px;
        }
        
        .hero-animation { 
            width:100%; 
            max-width:300px; 
            height:300px; 
            margin:28px auto 0 
        }

        .btn-primary-cta { 
            display:inline-block; 
            text-decoration:none; 
            padding:12px 30px; 
            border-radius:50px; 
            font-weight:700; 
            background:var(--color-accent); 
            color:var(--color-text-primary); 
            border:2px solid var(--color-accent); 
            box-shadow:0 6px 18px rgba(139,92,246,0.22); 
            transition:all .22s;
            font-size: clamp(0.9rem, 2vw, 1rem);
        }
        
        .btn-primary-cta:hover { 
            background:var(--color-accent-hover); 
            transform:translateY(-4px); 
            box-shadow:0 12px 26px rgba(139,92,246,0.28) 
        }

        /* ========== Sections ========== */
        section { 
            padding:clamp(40px, 8vw, 70px) 0; 
            text-align:center; 
            background-color: transparent; 
        }
        
        .overview h2, .how-it-works h2, .coping-tips h2 { 
            color:var(--color-accent); 
            font-size:clamp(1.8rem, 4vw, 2.2rem); 
            margin-bottom:12px 
        }
        
        .subtitle { 
            color:rgba(255,255,255,0.78); 
            margin-bottom:28px; 
            font-size:clamp(0.95rem, 2vw, 1.05rem);
            padding: 0 10px;
        }

        .about-features{ 
            display:grid; 
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap:20px; 
            margin-top:28px;
            padding: 0 10px;
        }
        
        .feature-item{ 
            background:var(--color-card-bg); 
            border:1px solid var(--color-glass-border); 
            border-radius:12px; 
            padding:20px; 
            transition:transform .24s 
        }
        
        .feature-item:hover{ 
            transform:translateY(-6px) 
        }
        
        .feature-item span{ 
            font-size:2.2rem; 
            display:block; 
            margin-bottom:8px 
        }

        .steps{ 
            display:grid; 
            grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); 
            gap:20px; 
            margin-top:24px;
            padding: 0 10px;
        }
        
        .step-card{ 
            background:var(--color-card-bg); 
            border:1px solid var(--color-glass-border); 
            padding:22px; 
            border-radius:12px; 
            text-align:left 
        }
        
        .step-card h3 { 
            color:var(--color-accent-hover); 
            margin-bottom:8px 
        }

        .tips-list{ 
            display:flex; 
            justify-content:center; 
            flex-wrap:wrap; 
            gap:14px; 
            margin-top:18px;
            padding: 0 10px;
        }
        
        .tip-item{ 
            background: rgba(76,29,149,0.58); 
            padding:12px 20px; 
            border-radius:8px; 
            border-left:3px solid var(--color-accent); 
            max-width:240px 
        }

        .quote-box{ 
            background: rgba(0,0,12,0.45); 
            border:1px solid var(--color-accent); 
            padding:20px; 
            border-radius:10px; 
            max-width:820px; 
            margin:28px auto; 
            color:#d3c4ff; 
            font-style:italic 
        }

        /* Contact */
        .contact-grid{ 
            display:grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap:28px; 
            margin-top:18px;
            padding: 0 10px;
        }
        
        .contact-info, .contact-form{ 
            text-align: left;
        }
        
        .contact-form input, .contact-form textarea{ 
            background: rgba(255,255,255,0.03); 
            border:1px solid var(--color-glass-border); 
            color:var(--color-text-primary); 
            padding:10px; 
            border-radius:8px;
            width: 100%;
        }
        
        .contact-form form {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .contact-form button {
            background: var(--color-accent);
            color: var(--color-text-primary);
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.2s ease, transform 0.2s ease;
            align-self: flex-start;
        }

        .contact-form button:hover {
            background: var(--color-accent-hover);
            transform: translateY(-2px);
        }

        /* Footer */
        footer { 
            background: linear-gradient(180deg, rgba(0,0,8,0.12), rgba(0,0,12,0.2)); 
            padding:26px 20px; 
            border-top:1px solid rgba(255,255,255,0.04); 
            margin-top:auto; 
            color:rgba(255,255,255,0.75) 
        }
        
        footer .container{ 
            display:flex; 
            justify-content:space-between; 
            align-items:center; 
            flex-wrap:wrap; 
            gap:12px 
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-3px); }
        }

        /* Smooth hide-on-scroll header */
        header.hide {
            transform: translateY(-110%);
        }

        /* ========== RESPONSIVE MEDIA QUERIES ========== */
        
        /* Tablets and small laptops */
        @media (max-width: 1024px) {
            nav a {
                padding: 6px 12px;
                font-size: 0.95rem;
            }
            
            .nav-button {
                padding: 8px 16px;
                font-size: 0.95rem;
            }
            .logo-img {
                width: 100px;  /* tablets पर 100px */
            }
        }

        /* Mobile devices */
        @media (max-width: 768px) {
            .header-right {
                display: none !important; /* Hide external button on mobile */
            }

            header {
                padding: 12px 0;
            }
            
            header .container {
                position: relative;
                justify-content: space-between; /* Ensure logo left, toggle right */
            }
            .logo {
               font-size: 1.5rem;  
            }
            .logo-img {
                width: 80px;
            }
            
            /* Show hamburger menu */
            .menu-toggle {
                display: flex;
            }
            
            /* Mobile navigation styles */
            nav {
                position: fixed;
                top: 0;
                right: -100%;
                width: 75%;
                max-width: 300px;
                height: 100vh;
                background: rgba(14,4,41,0.98);
                backdrop-filter: blur(20px);
                flex-direction: column;
                align-items: flex-start;
                padding: 80px 30px 30px;
                gap: 20px;
                transition: right 0.3s ease;
                overflow-y: auto;
                box-shadow: -5px 0 20px rgba(0,0,0,0.5);
            }
            
            nav.active {
                right: 0;
            }
            
            nav a {
                width: 100%;
                padding: 12px 16px;
                font-size: 1rem;
                border-radius: 8px;
            }
            
            nav a:hover {
                background: rgba(139,92,246,0.2);
            }
            
            .nav-button {
                width: 100%;
                text-align: center;
                margin-top: 20px;
                display: block !important; /* Ensure it shows in menu */
            }
            
            /* Hide the desktop-only button inside nav if we had one, but we are adding a mobile-specific one */
            .mobile-only-btn {
                display: block;
                width: 100%;
                text-align: center;
                margin-top: 15px;
            }
            
            /* Overlay when menu is open */
            .menu-overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.5);
                z-index: 1005;
            }
            
            .menu-overlay.active {
                display: block;
            }
            
            /* Hero adjustments */
            .hero {
                padding: 120px 15px 60px 15px;
            }
            
            /* Sections adjustments */
            .steps {
                grid-template-columns: 1fr;
            }
            
            .feature-item {
                max-width: 100%;
            }
            
            .contact-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Small mobile devices */
        @media (max-width: 480px) {
            .logo {
               font-size: 1.3rem;
           }
    
           .logo-img {
                width: 70px;
            }
            nav {
                width: 85%;
                padding: 70px 20px 20px;
            }

            .header-right {
                display: none !important; /* Force hide external button on small screens */
            }
            
            .hero {
                padding: 100px 10px 50px 10px;
            }
            
            .btn-primary-cta {
                padding: 10px 24px;
            }
            
            .tips-list {
                flex-direction: column;
                align-items: center;
            }
            
            .tip-item {
                width: 90%;
                max-width: 280px;
            }
            
            footer .container {
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }
        }

        /* Very small devices */
        @media (max-width: 360px) {
            .container {
                width: 95%;
                padding: 0 10px;
            }

              .logo-img {
                     width: 60px;  /* very small screens पर 60px */
            }
            
            .hero h1 {
                font-size: 1.6rem;
            }
            
            .hero p {
                font-size: 0.9rem;
            }
            
            nav {
                width: 90%;
            }
        }

    </style>
</head>
<body>
    <!-- Fullscreen Canvas + overlays (behind all content) -->
    <canvas id="spaceCanvas" aria-hidden="true"></canvas>
    <div class="nebula-overlay" aria-hidden="true"></div>
    <div class="twinkle-overlay" aria-hidden="true"></div>

    <!-- Menu overlay for mobile -->
    <div class="menu-overlay" id="menuOverlay"></div>

    <!-- ========== Header / page content ========== -->
    <header>
        <div class="container">
            <a href="#" class="logo" aria-label="StressOMeter home">
                <img src="assets/logo.png" alt="StressOMeter Logo" class="logo-img">
            </a>

            <!-- Hamburger menu button -->
            <button class="menu-toggle" id="menuToggle" aria-label="Toggle navigation">
                <span></span>
                <span></span>
                <span></span>
            </button>

            <nav id="navigation" aria-label="Main navigation">
                <a href="#">Home</a>
                <a href="#about">About</a>
                <a href="#how-it-works">How It Works</a>
                <a href="#contact">Contact</a>
                <!-- Mobile Only Button inside Menu -->
                <a href="/login" class="nav-button mobile-only-btn">Sign Up / Login</a>
            </nav>

            <div class="header-right">
                 <a href="/login" class="nav-button">Sign Up / Login</a>
            </div>
        </div>
    </header>

    <main>
        <section class="hero">
            <div class="container">
                <h1>Predict and Manage Stress — Before It Manages You.</h1>
                <p>Get data-driven insights into your stress levels and personalized coping tips.</p>
                <a href="/login" class="btn-primary-cta">Check My Stress Level</a>
            </div>
        </section>

        <section id="about" class="overview">
            <div class="container">
                <h2>The Science of Calm</h2>
                <p class="subtitle">StressOMeter is an advanced analytical platform that predicts your stress level using health and lifestyle data. We help you understand the factors affecting your mental well-being and provide easy techniques to stay calm.</p>

                <div class="about-features">
                    <div class="feature-item">
                        <h3>Sleep Tracking</h3>
                        <p>Analyze sleep duration and quality to gauge recovery.</p>
                    </div>
                    <div class="feature-item">
                        <h3>Activity Analysis</h3>
                        <p>Evaluate physical exertion and rest periods.</p>
                    </div>
                    <div class="feature-item">
                        <h3>HRV Monitoring</h3>
                        <p>Track heart rate variability for deep stress signals.</p>
                    </div>
                    <div class="feature-item">
                        <h3>Personalized Recs</h3>
                        <p>Receive custom techniques just for your profile.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="how-it-works" class="how-it-works">
            <div class="container">
                <h2>Our Simple 4-Step Process</h2>
                <p class="subtitle">Predicting your stress has never been easier or more accurate.</p>

                <div class="steps">
                    <div class="step-card">
                        <p class="step-number">Step 1</p>
                        <h3>Input Details</h3>
                        <p>Securely enter basic data like age, sleep hours, and recent mood.</p>
                    </div>
                    <div class="step-card">
                        <p class="step-number">Step 2</p>
                        <h3>Advanced Analysis</h3>
                        <p>Our computational model processes your data instantly.</p>
                    </div>
                    <div class="step-card">
                        <p class="step-number">Step 3</p>
                        <h3>Get Prediction</h3>
                        <p>Receive your stress score (0-10) and root-cause factors.</p>
                    </div>
                    <div class="step-card">
                        <p class="step-number">Step 4</p>
                        <h3>Follow Tips</h3>
                        <p>Implement personalized, actionable coping strategies immediately.</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="coping-tips">
            <div class="container">
                <h2>Your Toolkit for Stress Relief</h2>
                <p class="subtitle">Quick, practical strategies to bring you back to the present moment.</p>

                <div class="tips-list">
                    <div class="tip-item">Deep Breathing</div>
                    <div class="tip-item">Light Exercise</div>
                    <div class="tip-item">Guided Meditation</div>
                    <div class="tip-item">Listen to Calm Music</div>
                    <div class="tip-item">Maintain Proper Sleep</div>
                </div>

                <div class="quote-box">
                    "You can't always control what happens, but you can control how you respond."
                    <small>— StressOMeter Motivation</small>
                </div>
            </div>
        </section>

        <section id="contact" class="contact">
            <div class="container">
                <h2>Get in Touch</h2>
                <div class="contact-grid">
                    <div class="contact-info">
                        <h3>Contact Information</h3>
                        <p>Email: <a href="mailto:stressOMeter@example.com" style="color: var(--color-accent);">stressfree@example.com</a></p>
                        <p>Support: +91 98765 43210 (Mon-Fri, 9am-5pm IST)</p>
                    </div>
                    <div class="contact-form">
                        <h3>Send us a Message</h3>
                        <form action="#" method="POST">
                            <input type="text" name="name" placeholder="Your Name" required>
                            <input type="email" name="email" placeholder="Your Email" required>
                            <textarea name="message" rows="4" placeholder="Your Message" required></textarea>
                            <button type="submit">Send Message</button>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>© 2025 StressOMeter. All rights reserved. | Built for mental well-being.</p>
            <div class="footer-links">
                <a href="#">Privacy Policy</a> | <a href="#">Terms of Use</a> | <a href="#">Sitemap</a>
            </div>
        </div>
    </footer>

    <!-- ========== Canvas animation script (unchanged) ========== -->
    <script>
    (function(){
        const canvas = document.getElementById('spaceCanvas');
        if (!canvas) return;
        const ctx = canvas.getContext('2d');
        let DPR = Math.min(window.devicePixelRatio || 1, 2);
        let running = true;

        function resizeCanvas(){
            DPR = Math.min(window.devicePixelRatio || 1, 2);
            canvas.width = Math.floor(window.innerWidth * DPR);
            canvas.height = Math.floor(window.innerHeight * DPR);
            canvas.style.width = window.innerWidth + 'px';
            canvas.style.height = window.innerHeight + 'px';
            ctx.setTransform(DPR,0,0,DPR,0,0);
        }

        let stars = [];
        let dust = [];
        let nebulaBlobs = [];
        let t = 0;

        function rand(min,max){ return Math.random()*(max-min)+min; }

        function init(){
            resizeCanvas();
            const W = window.innerWidth;
            const H = window.innerHeight;

            const starCount = Math.floor(Math.max(110, W * 0.08));
            stars = [];
            for(let i=0;i<starCount;i++){
                stars.push({
                    x: Math.random()*W,
                    y: Math.random()*H,
                    r: Math.random()*1.6 + 0.3,
                    baseAlpha: Math.random()*0.8 + 0.15,
                    twinkleSpeed: Math.random()*0.015 + 0.004,
                    vx: (Math.random()-0.5)*0.03,
                    vy: (Math.random()-0.5)*0.03,
                    hue: Math.random()<0.12 ? 'warm' : 'cold'
                });
            }

            dust = [];
            const dustCount = Math.floor(Math.max(28, W * 0.02));
            for(let i=0;i<dustCount;i++){
                dust.push({
                    x: Math.random()*W,
                    y: Math.random()*H,
                    size: rand(14, 60),
                    speed: rand(0.01, 0.16),
                    angle: rand(0, Math.PI*2),
                    hue: rand(240,290)
                });
            }

            nebulaBlobs = [];
            const blobs = 5;
            for(let i=0;i<blobs;i++){
                nebulaBlobs.push({
                    x: rand(0.1*W, 0.9*W),
                    y: rand(0.05*H, 0.6*H),
                    sizeX: rand(300, 900),
                    sizeY: rand(200, 700),
                    hue: i%2===0 ? {r:139,g:92,b:246,a:0.14} : {r:80,g:120,b:255,a:0.10},
                    dx: rand(-0.03,0.03),
                    dy: rand(-0.01,0.01),
                    rot: rand(0, Math.PI*2)
                });
            }
        }

        function draw() {
            if (!running) { requestAnimationFrame(draw); return; }
            t += 0.008;
            const W = canvas.width / DPR;
            const H = canvas.height / DPR;

            const g = ctx.createLinearGradient(0,0,W,H);
            const a = Math.sin(t*0.12)*0.06 + 0.92;
            g.addColorStop(0, `rgba(10,4,36,${0.9*a})`);
            g.addColorStop(0.5, `rgba(24,8,60,${0.75*a})`);
            g.addColorStop(1, `rgba(2,1,12,${0.95})`);
            ctx.fillStyle = g;
            ctx.fillRect(0,0,W,H);

            for(let i=0;i<nebulaBlobs.length;i++){
                const b = nebulaBlobs[i];
                b.x += Math.cos(t* (0.03 + i*0.002))*b.dx;
                b.y += Math.sin(t* (0.02 + i*0.001))*b.dy;
                b.rot += 0.0008;

                const gx = ctx.createRadialGradient(b.x, b.y, Math.min(b.sizeX,b.sizeY)*0.05, b.x, b.y, Math.max(b.sizeX,b.sizeY));
                const c1 = `rgba(${b.hue.r},${b.hue.g},${b.hue.b},${b.hue.a})`;
                gx.addColorStop(0, c1);
                gx.addColorStop(0.45, `rgba(${b.hue.r},${b.hue.g},${b.hue.b},${b.hue.a*0.38})`);
                gx.addColorStop(1, 'rgba(0,0,0,0)');

                ctx.save();
                ctx.globalCompositeOperation = 'lighter';
                ctx.globalAlpha = 1.0;
                ctx.fillStyle = gx;
                ctx.beginPath();
                ctx.ellipse(b.x, b.y, b.sizeX, b.sizeY, b.rot, 0, Math.PI*2);
                ctx.fill();
                ctx.restore();
            }

            for(let i=0;i<dust.length;i++){
                const d = dust[i];
                d.x += Math.cos(d.angle + t*0.02) * d.speed * 0.6;
                d.y += Math.sin(d.angle + t*0.01) * d.speed * 0.4;
                if(d.x < -d.size) d.x = W + d.size;
                if(d.x > W + d.size) d.x = -d.size;
                if(d.y < -d.size) d.y = H + d.size;
                if(d.y > H + d.size) d.y = -d.size;

                const grad = ctx.createRadialGradient(d.x, d.y, 0, d.x, d.y, d.size);
                grad.addColorStop(0, `rgba(120,80,255,0.12)`);
                grad.addColorStop(0.5, `rgba(80,120,255,0.06)`);
                grad.addColorStop(1, 'rgba(0,0,0,0)');

                ctx.save();
                ctx.globalCompositeOperation = 'lighter';
                ctx.globalAlpha = 0.9;
                ctx.fillStyle = grad;
                ctx.beginPath();
                ctx.arc(d.x, d.y, d.size, 0, Math.PI*2);
                ctx.fill();
                ctx.restore();
            }

            for(let i=0;i<stars.length;i++){
                const s = stars[i];
                s.x += s.vx;
                s.y += s.vy;
                if(s.x < 0) s.x += W; if(s.x > W) s.x -= W;
                if(s.y < 0) s.y += H; if(s.y > H) s.y -= H;

                const alpha = s.baseAlpha + Math.sin(t * (0.5 + s.twinkleSpeed*200) + i) * (s.twinkleSpeed*8);
                ctx.save();
                const glow = ctx.createRadialGradient(s.x, s.y, 0, s.x, s.y, s.r*6);
                if(s.hue === 'warm'){
                    glow.addColorStop(0, `rgba(255,230,200,${Math.max(0.05, alpha)})`);
                    glow.addColorStop(0.6, `rgba(255,195,120,${Math.max(0.02, alpha*0.16)})`);
                } else {
                    glow.addColorStop(0, `rgba(230,240,255,${Math.max(0.05, alpha)})`);
                    glow.addColorStop(0.6, `rgba(170,180,255,${Math.max(0.02, alpha*0.14)})`);
                }
                glow.addColorStop(1, 'rgba(0,0,0,0)');
                ctx.fillStyle = glow;
                ctx.beginPath();
                ctx.arc(s.x, s.y, s.r*6, 0, Math.PI*2);
                ctx.fill();

                ctx.beginPath();
                ctx.fillStyle = `rgba(255,255,255,${Math.min(1, Math.max(0.12, alpha))})`;
                ctx.arc(s.x, s.y, s.r, 0, Math.PI*2);
                ctx.fill();
                ctx.restore();
            }

            ctx.save();
            ctx.globalAlpha = 0.045;
            ctx.beginPath();
            const cx = W/2 + Math.cos(t*0.15)*40;
            const cy = H/2 + Math.sin(t*0.12)*20;
            ctx.ellipse(cx, cy, Math.min(W,H)*0.28, Math.min(W,H)*0.12, t*0.002, 0, Math.PI*2);
            const ringGrad = ctx.createLinearGradient(cx-200, cy-100, cx+200, cy+100);
            ringGrad.addColorStop(0, 'rgba(120,80,255,0.06)');
            ringGrad.addColorStop(1, 'rgba(80,120,255,0.03)');
            ctx.strokeStyle = ringGrad;
            ctx.lineWidth = 100;
            ctx.stroke();
            ctx.restore();

            requestAnimationFrame(draw);
        }

        document.addEventListener('visibilitychange', ()=> {
            running = !document.hidden;
        });

        window.addEventListener('resize', ()=> init());
        init();
        requestAnimationFrame(draw);
    })();
    </script>

    <!-- Mobile Menu Toggle Script -->
    <script>
    (function(){
        const menuToggle = document.getElementById('menuToggle');
        const navigation = document.getElementById('navigation');
        const menuOverlay = document.getElementById('menuOverlay');
        
        if (!menuToggle || !navigation) return;
        
        menuToggle.addEventListener('click', function() {
            menuToggle.classList.toggle('active');
            navigation.classList.toggle('active');
            menuOverlay.classList.toggle('active');
            
            // Prevent body scroll when menu is open
            if (navigation.classList.contains('active')) {
                document.body.style.overflow = 'hidden';
            } else {
                document.body.style.overflow = '';
            }
        });
        
        // Close menu when clicking overlay
        menuOverlay.addEventListener('click', function() {
            menuToggle.classList.remove('active');
            navigation.classList.remove('active');
            menuOverlay.classList.remove('active');
            document.body.style.overflow = '';
        });
        
        // Close menu when clicking a link (mobile)
        const navLinks = navigation.querySelectorAll('a');
        navLinks.forEach(link => {
            link.addEventListener('click', function() {
                if (window.innerWidth <= 768) {
                    menuToggle.classList.remove('active');
                    navigation.classList.remove('active');
                    menuOverlay.classList.remove('active');
                    document.body.style.overflow = '';
                }
            });
        });
    })();
    </script>

    <!-- Header hide/show on scroll -->
    <script>
    (function(){
        let lastScroll = 0;
        const header = document.querySelector('header');
        if (!header) return;
        const delta = 10;
        let ticking = false;

        window.addEventListener('scroll', () => {
            if (!ticking) {
                window.requestAnimationFrame(() => {
                    const currentScroll = window.pageYOffset || document.documentElement.scrollTop;

                    if (Math.abs(currentScroll - lastScroll) > delta) {
                        if (currentScroll > lastScroll && currentScroll > 20) {
                            header.classList.add('hide');
                        } else {
                            header.classList.remove('hide');
                        }
                        lastScroll = currentScroll;
                    }

                    ticking = false;
                });
                ticking = true;
            }
        });
    })();
    </script>

</body>
</html>